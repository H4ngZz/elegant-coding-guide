plugins {
    id("java")
    id("org.jetbrains.intellij") version "1.17.3"
}

group = "me.hang.elegant.coding.guide"
version = "0.1-SNAPSHOT"

repositories {
    mavenCentral()
}

intellij {
    version.set("2024.2.3")
    plugins.set(["java"])
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
    options.compilerArgs += ['-Xlint:unchecked', '-Xlint:deprecation', '-parameters']
}

patchPluginXml {
    sinceBuild.set("222")
    untilBuild.set("242.*")
}

signPlugin {
    certificateChain.set(System.getenv("CERTIFICATE_CHAIN"))
    privateKey.set(System.getenv("PRIVATE_KEY"))
    password.set(System.getenv("PRIVATE_KEY_PASSWORD"))
}

publishPlugin {
    token.set(System.getenv("PUBLISH_TOKEN"))
}
